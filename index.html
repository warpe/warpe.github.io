<!DOCTYPE HTML>
<html>
	<head>
		<!-- <title>//TITLE</title> -->
		<!-- Include meta tag to ensure proper rendering and touch zooming -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
		<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
		<script> 
			$(document).bind('mobileinit',function(){
	        	$.mobile.changePage.defaults.changeHash = false;
	        	$.mobile.hashListeningEnabled = false;
	        	$.mobile.pushStateEnabled = false;
	    	});
		</script> 
		<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<style>
			html{ 
				/* Prevent font scaling in landscape while allowing user zoom */ 
				-webkit-text-size-adjust: 100%; 
			} 

			input[type=text], input[type=url], input[type=email], input[type=password], input[type=tel], button, select, textarea{ 
				-webkit-appearance: none; -moz-appearance: none;
				display: block;
				margin: 0;
				width: 100%; height: 40px;
				line-height: 40px; font-size: 17px;
				border: 1px solid #bbb; 
				text-align: center; 
			}

			input[type=checkbox]{ 
				width: 44px; height: 44px; 
				-webkit-border-radius: 22px; -moz-border-radius: 22px; border-radius: 22px; 
				border: 1px solid #bbb; 
			}

			button[type=submit]{ 
				-webkit-appearance: none; -moz-appearance: none; 
				display: block; 
				margin: 1.5em 0; 
				font-size: 1em; 
				line-height: 2.5em; 
				color: #333; 
				font-weight: bold; 
				height: 2.5em; 
				width: 100%; 
				background: #fdfdfd; 
				background: -moz-linear-gradient(top, #fdfdfd 0%, #bebebe 100%); 
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fdfdfd), color-stop(100%,#bebebe)); 
				background: -webkit-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: -o-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: -ms-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: linear-gradient(to bottom, #fdfdfd 0%,#bebebe 100%); 
				border: 1px solid #bbb; 
				-webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; 
			}

			input[type=range]{ 
				width: 100%; 
			} 

			input[type=range]::-webkit-slider-thumb{ 
				-webkit-appearance: none; 
				width: 44px; 
				height: 44px; 
				background: #fdfdfd; 
				background: -moz-linear-gradient(top, #fdfdfd 0%, #bebebe 100%); 
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fdfdfd), color-stop(100%,#bebebe)); 
				background: -webkit-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: -o-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: -ms-linear-gradient(top, #fdfdfd 0%,#bebebe 100%); 
				background: linear-gradient(to bottom, #fdfdfd 0%,#bebebe 100%); 
				border: 1px solid #bbb; 
				-webkit-border-radius: 22px; 
				-moz-border-radius: 22px; 
				border-radius: 22px; 
			}
			/* unstyled tel links as default */ 
			a[href^='tel:']:link, a[href^='tel:']:visited {
				color: #6f757c; 
				font-weight: normal; 
				text-decoration: none; 
			} 

			a[href^='tel:']:hover, a[href^='tel:']:active { 
				color: #6f757c; 
				text-decoration: none; 
			}

			/* styled tel links for small viewports */ 
			@media screen and (max-width: 600px) { 
				a[href^='tel:']:link, a[href^='tel:']:visited { 
					color: #333; 
					font-weight: bold; 
					text-decoration: underline; 
				}
				a[href^='tel:']:hover, a[href^='tel:']:active { 
					color: #333; 
					text-decoration: none; 
				}
			}

			canvas{
				border: 5px solid grey; 
				margin-left: -10px; 
				margin-top: -10px;
			}

		</style>
		<script> 

			function main(){
				$("#myPopup").popup("open"); 
			}

			var canvas, ctx; 

			var rowa = [1, 5, 3]; 
			var rowb = [6, 4, 8]; 
			var rowc = [2, 7, 1]; 
			var data = [rowa, rowb, rowc]; 

			window.onload = function main(){

				canvas = document.createElement("canvas"); 
				canvas.width = canvas.height = 3 * 100; 
				ctx = canvas.getContext("2d"); 

				document.getElementById("gameContainer").appendChild(canvas); 

				render(); 


				//canvas.addEventListener("mousedown", mouseDown); 
				canvas.addEventListener('mousedown', function(evt) {

				    var mousePos = getMousePos(canvas, evt);
				    mousePos.x -= mousePos.x % 100; 
				    mousePos.y -= mousePos.y % 100; 
				    var cell = data[(mousePos.y / 100)][(mousePos.x/100)]; 
				    
					ctx.clearRect (0, 0, canvas.width, canvas.height);

			    	data[(mousePos.y / 100)][(mousePos.x / 100)] = rotateCell(cell); 

				    render();
				    
					//console.log(data); 

					checkAnswer(); 

			  	}, false);
			}	

			function render(){

				var x = y = 0; 
				for (var i = 0; i < data.length; i++) {
					for (var j = 0; j < data[i].length; j++) {
					
						ctx.beginPath(); 
						ctx.moveTo(x, y); 
						ctx.lineTo(x + 100, y); 
						ctx.lineTo(x + 100, y + 100); 
						ctx.lineTo(x, y + 100); 
						ctx.lineTo(x, y); 
						ctx.strokeStyle = "grey"; 
						ctx.lineWidth = 5; 
						ctx.stroke(); 
						ctx.fillStyle = "white"; //getRandomColor(); 
						ctx.fill(); 

						drawItem(x, y, data[i][j]); 

						x += 100; 
					}
					x = 0; 
					y += 100;
				};
			}

			function checkAnswer(){
				var status = [[3, 6, 4], [5, 3, 10], [2, 7, 1]]; 
				var correct = 0; 
				for (var i = 0; i < data.length; i++) {
					for (var j = 0; j < data[i].length; j++) {
						if(status[i][j] == data[i][j]){
							correct++; 
						} 
						//console.log(correct); 
					}
				}

				if (correct == 9){
					main(); 
				}
			}

			function drawItem(x, y, type){
				var x = x, y = y, type = type; 
				ctx.beginPath(); 
				
				switch(type){
					case 0: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 100); 
						ctx.moveTo(x, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
					;break; 

					case 1: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 50); 
						ctx.lineTo(x, y + 50); 
					;break; 
					case 2: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
					;break; 
					case 3: 
						ctx.moveTo(x + 100, y + 50); 
						ctx.lineTo(x + 50, y + 50); 
						ctx.lineTo(x + 50, y + 100); 
					;break; 
					case 4: 
						ctx.moveTo(x, y + 50); 
						ctx.lineTo(x + 50, y + 50); 
						ctx.lineTo(x + 50, y + 100); 
					;break; 

					case 5: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 100); 
					;break; 
					case 6: 
						ctx.moveTo(x, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
					;break; 

					case 7: 
						ctx.moveTo(x, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
						ctx.moveTo(x + 50, y + 50); 
						ctx.lineTo(x + 50, y); 
					;break; 
					case 8: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 100); 
						ctx.moveTo(x + 50, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
					;break; 
					case 9: 
						ctx.moveTo(x, y + 50); 
						ctx.lineTo(x + 100, y + 50); 
						ctx.moveTo(x + 50, y + 50); 
						ctx.lineTo(x + 50, y + 100); 
					;break; 
					case 10: 
						ctx.moveTo(x + 50, y); 
						ctx.lineTo(x + 50, y + 100); 
						ctx.moveTo(x + 50, y + 50); 
						ctx.lineTo(x, y + 50); 
					;break; 
				}
				
				ctx.lineWidth = 5; 
				ctx.strokeStyle = "black"; 
				ctx.stroke(); 
			}

			function getRandomColor() {
			    var letters = '0123456789ABCDEF'.split('');
			    var color = '#';
			    for (var i = 0; i < 6; i++ ) {
			        color += letters[Math.floor(Math.random() * 16)];
			    }
			    return color;
			}

			function getMousePos(canvas, evt) {
			    
			    var rect = canvas.getBoundingClientRect();
			    return {
			      	x: evt.clientX - rect.left,
			      	y: evt.clientY - rect.top
			    };
			}

			function rotateCell(cell){
				var cell = cell; 
				if(cell == 1 || cell == 2 || cell == 3){
					cell++; 
				}
				else if(cell == 4){
					cell = 1; 
				}
				
				if(cell == 5){
					cell = 6; 
				}
				else if(cell == 6){
					cell = 5; 
				}

				if(cell == 7 || cell == 8 || cell == 9){
					cell++; 
				}
				else if(cell == 10){
					cell = 7; 
				}

				return cell; 
			}
		</script>
	</head>
	<body>
		<div id="homePage" data-role="page" data-theme="a">
			
			<div data-role="header"> 
				<a onclick="main()" class="ui-btn ui-corner-all ui-icon-info ui-btn-icon-notext">Info</a>
				<h1>GAME</h1> 
				<a onclick="main()" class="ui-btn ui-corner-all ui-icon-gear ui-btn-icon-notext">Settings</a>
		  	</div>

			<div data-role="main" class="ui-content"> 
				<div class="ui-field-contain">
					<p>
						//MAIN BACKGROUND
					</p>
				</div>
			</div> 
			
			<a href="#gamePage" data-role="button">PLAY</a>
	
			<div data-role="footer">
				<h2 id="footer">//ADVERTISEMENT</h2>
			</div>

			<div data-role="popup" id="myPopup" class="ui-content"> 
				<a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a> 
				<p>Whoopsie ding dong! Something went wrong :(</p>
			</div> 
		</div>


		<div id="gamePage" data-role="page" data-theme="a">
			
			<div data-role="header"> 
				<a href="#homePage" class="ui-btn ui-corner-all ui-icon-arrow-l ui-btn-icon-notext">Back</a>
				<h1>GAME</h1> 
				<a href="#" class="ui-btn ui-corner-all ui-icon-gear ui-btn-icon-notext">Settings</a>
		  	</div>

			<div data-role="main" class="ui-content"> 
				<div class="ui-field-contain">
					<div id="gameContainer">
					</div>
				</div>
			</div> 
			
			<div data-role="footer">
				<h2 id="footer">//ADVERTISEMENT</h2>
			</div>
			<div data-role="popup" id="myPopup" class="ui-content"> 
				<a href="#" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn ui-icon-delete ui-btn-icon-notext ui-btn-left">Close</a> 
				<p>Whoopsie ding dong! Something went wrong :(</p>
			</div> 
		</div>
	</body>
</html>